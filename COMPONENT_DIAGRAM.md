# Face Recognition System Component Diagram

This document provides a visual representation of the system components and their interactions.

## Main Components and Data Flow

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           Web Application Layer                          │
│                                                                         │
│  ┌─────────────┐      ┌─────────────┐      ┌─────────────────────────┐  │
│  │ User        │      │ Admin       │      │ Authentication &         │  │
│  │ Interface   │◄────►│ Interface   │◄────►│ Session Management      │  │
│  └─────┬───────┘      └──────┬──────┘      └───────────┬─────────────┘  │
│        │                     │                         │                 │
│        └─────────────────────┼─────────────────────────┘                 │
│                              │                                           │
│                              ▼                                           │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │                        Flask Application                         │   │
│  │                            (app.py)                              │   │
│  └───────────────────────────────┬──────────────────────────────────┘   │
│                                  │                                       │
└──────────────────────────────────┼───────────────────────────────────────┘
                                   │
                                   ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                         Client-Server Interface                          │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │                   Face Recognition Client                       │    │
│  │                  (face_recognition_client.py)                   │    │
│  └────────────────────────────────┬────────────────────────────────┘    │
│                                   │                                      │
└───────────────────────────────────┼──────────────────────────────────────┘
                                   │
                                   │ Socket Connection
                                   │ (TCP/IP)
                                   ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                         Recognition Server Layer                         │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │                   Face Recognition Server                       │    │
│  │                 (face_recognition_server.py)                    │    │
│  └────────────────────────────────┬────────────────────────────────┘    │
│                                   │                                      │
│                                   ▼                                      │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │                   Face Recognition Model                        │    │
│  │               (Restnet_face_recognition_model.py)               │    │
│  └────────────────────────────────┬────────────────────────────────┘    │
│                                   │                                      │
└───────────────────────────────────┼──────────────────────────────────────┘
                                   │
                                   ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                             Storage Layer                               │
│                                                                         │
│  ┌─────────────────┐      ┌─────────────────┐      ┌─────────────────┐  │
│  │                 │      │                 │      │                 │  │
│  │  SQLite Database│      │  Known Faces    │      │  Upload Folder  │  │
│  │  (face_recog.db)│      │  (known_faces/) │      │  (uploads/)     │  │
│  │                 │      │                 │      │                 │  │
│  └─────────────────┘      └─────────────────┘      └─────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

## Configuration Dependencies

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           Configuration File                            │
│                              (config.py)                                │
└───────┬─────────────────┬────────────────────┬────────────────┬─────────┘
        │                 │                    │                │
        ▼                 ▼                    ▼                ▼
┌───────────────┐  ┌────────────────┐  ┌─────────────┐  ┌────────────────┐
│ Web App       │  │ Recognition    │  │ Recognition │  │ Database       │
│ Settings      │  │ Server Settings│  │ Parameters  │  │ Settings       │
└───────────────┘  └────────────────┘  └─────────────┘  └────────────────┘
```

## Database Schema

```
┌───────────────────────┐       ┌───────────────────────┐
│     organizations     │       │         users         │
├───────────────────────┤       ├───────────────────────┤
│ id (PK)              │       │ id (PK)               │
│ name                 │       │ username              │
│ org_type             │◄──────┤ password              │
│ created_at           │       │ full_name             │
└───────────────────────┘       │ user_id               │
        ▲                       │ is_admin              │
        │                       │ organization_id (FK)  │
        │                       └───────────────────────┘
        │                                 ▲
        │                                 │
        │                                 │
        │       ┌───────────────────────┐ │
        └───────┤      attendance       │ │
                ├───────────────────────┤ │
                │ id (PK)               │ │
                │ user_id               ├─┘
                │ full_name             │
                │ date                  │
                │ time                  │
                │ confidence            │
                │ organization_id (FK)  │
                └───────────────────────┘
```

## Recognition Process Flow

```
┌────────────┐     ┌────────────┐     ┌────────────┐     ┌────────────┐
│            │     │            │     │            │     │            │
│  Capture   │────►│  Detect    │────►│  Extract   │────►│  Compare   │
│  Frame     │     │  Faces     │     │  Features  │     │  Features  │
│            │     │            │     │            │     │            │
└────────────┘     └────────────┘     └────────────┘     └────────────┘
                                                                │
                                                                ▼
┌────────────┐     ┌────────────┐     ┌────────────┐     ┌────────────┐
│            │     │            │     │            │     │            │
│  Record    │◄────┤  Verify    │◄────┤  Calculate │◄────┤  Identify  │
│ Attendance │     │ Confidence │     │ Similarity │     │  Person    │
│            │     │            │     │            │     │            │
└────────────┘     └────────────┘     └────────────┘     └────────────┘
```

## User Registration Flow

```
┌────────────┐     ┌────────────┐     ┌────────────┐     ┌────────────┐
│            │     │            │     │            │     │            │
│  Register  │────►│  Upload    │────►│  Process   │────►│  Store     │
│  Account   │     │  Photos    │     │  Images    │     │  Encodings │
│            │     │            │     │            │     │            │
└────────────┘     └────────────┘     └────────────┘     └────────────┘
```

## System Deployment Options

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         Single Machine Deployment                        │
│                                                                         │
│  ┌─────────────┐      ┌─────────────┐      ┌─────────────────────────┐  │
│  │ Web App     │      │ Recognition │      │ Database &               │  │
│  │ (Flask)     │◄────►│ Server      │◄────►│ File Storage            │  │
│  └─────────────┘      └─────────────┘      └─────────────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────────────┐
│                       Distributed Deployment                             │
│                                                                         │
│  ┌─────────────┐      ┌─────────────┐      ┌─────────────────────────┐  │
│  │ Web Server  │      │ Recognition │      │ Database                 │  │
│  │ Machine     │◄────►│ Server      │◄────►│ Server                   │  │
│  │             │      │ (with GPU)  │      │                          │  │
│  └─────────────┘      └─────────────┘      └─────────────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

This component diagram complements the SYSTEM_ARCHITECTURE.md document by providing visual representations of the system's structure and interactions.